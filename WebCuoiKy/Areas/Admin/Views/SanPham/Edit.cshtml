@model WebCuoiKy.Models.SanPham

@{
    ViewBag.Title = "Edit";
    Layout = "~/Areas/Admin/Views/Shared/_Layout_Admin.cshtml";
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

<script src="~/ckfinder/jquery.js"></script>
<script src="~/ckfinder/ckfinder.js"></script>
<script src="~/ckeditor/ckeditor.js"></script>

<div class="card mb-4" style="margin-left:20px;">
    <div class="card-header">
        <i class="fas fa-table me-1"></i>
        SỮA SẢN PHẨM
    </div>
    @*Thêm thuộc tính cho form để upload ảnh*@
    @using (Html.BeginForm("Edit", "SanPham", FormMethod.Post, new { @enctype = "multipart/form-data" }))
    {
        <div style="margin-left:16px; margin-top: 10px; margin-bottom:-15px;">
            <a href="@Url.Action("SanPham","SanPham")" class="btn btn-primary" role="button" style="background-color:#dd3a49;"><span class="bi bi-arrow-left"> Quay lại</span></a>
            <button type="submit" class="btn btn-primary" style="background-color: #2008cff"><i class="fas fa-save"></i> Lưu</button>
        </div>
        <div class="card-body">

            @Html.AntiForgeryToken()
            <div class="form-horizontal">
                <hr />
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="form-group">
                    <div class="col-md-10">
                        <label class="control-label col-md-2 py-2">Tên Sản Phẩm:</label><input type="text" size="70" name="sTenSP" required value="@Model.TenSP" style="margin-left:5px;" />
                    </div>
                </div>
                <div class="form-group py-2" style="display:inline;">
                    <div class="col-md-10">
                        <label class="control-label col-md-2" id="link">Ảnh Sản Phẩm:</label>
                        <input type="text" id="img_hinhanh" name="sAnhBia" size="50" value="@Model.AnhBia" />
                        <div class="btn btn-primary" style="background-color:#aaa; display:inline; border:1px solid #aaa; ">
                            <a id="btnchon" href="#" style="text-decoration:none; color:black;">Chọn tệp</a>
                        </div>
                    </div>
                </div>
                <div class="form-group py-2">
                    <div class="col-md-10">
                        <label class="control-label col-md-2">Số Lượng:</label>
                        <input type="text" name="sSoLuong" required size="30" value="@Model.SoLuong"/>
                    </div>
                </div>
                <div class="form-group py-2">
                    <div class="col-md-10">
                        <label class="control-label col-md-2">Đơn Giá:</label>
                        <input type="text" name="sDonGia" required size="40" value="@Model.DonGia"/>
                    </div>
                </div>
                <div class="form-group py-2">
                    <div class="col-md-10">
                        <label class="control-label col-md-2">Mô Tả Sản Phẩm:</label>
                        <textarea name="sMoTa" id="mota">@Model.MoTa</textarea>
                        <script>CKEDITOR.replace('mota');</script>
                    </div>
                </div>
                <div class="form-group py-2">
                    <div class="col-md-10">
                        <label class="control-label col-md-2">Chi Tiết Sản Phẩm:</label>
                        <textarea name="sChiTiet" id="chitiet">@Model.ChiTiet</textarea>
                        <script>CKEDITOR.replace('chitiet');</script>
                    </div>
                </div>
                <div class="form-group py-2">
                    <div class="col-md-offset-2 col-md-10">
                        <button type="reset" class="btn btn-primary" role="button" style="background-color:#727b82;"><span class="bi bi-arrow-clockwise"> Làm lại</span></button>
                        <button type="submit" class="btn btn-primary" style="background-color:#2008cff;"><i class="fas fa-save"></i> Lưu</button>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
</div>

<script>
    $('#btnchon').on('click', function (e) {
        e.preventDefault();
        var finder = new CKFinder();
        finder.selectActionFunction = function (url) {
            $(('#img_hinhanh')).val(url);
        };
        finder.popup();
    }
    )
</script>

